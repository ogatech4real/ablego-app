@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme system - applied to both html and body */
@layer base {
  html {
    transition-property: color-scheme;
    transition-duration: 300ms;
  }
  
  body {
    background-color: rgb(255 255 255);
    color: rgb(17 24 39);
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-duration: 300ms;
  }
  
  /* Dark mode styles - applied when either html.dark or body.dark is present */
  html.dark body,
  body.dark {
    background-color: rgb(15 23 42);
    color: rgb(243 244 246);
  }
  
  html.dark {
    color-scheme: dark;
  }
  
  /* Dark mode card backgrounds */
  html.dark .bg-white,
  body.dark .bg-white {
    background-color: rgb(30 41 59);
    border-color: rgb(51 65 85);
  }
  
  /* Dark mode text colors with better contrast */
  html.dark .text-gray-900,
  body.dark .text-gray-900 {
    color: rgb(249 250 251);
  }
  
  html.dark .text-gray-800,
  body.dark .text-gray-800 {
    color: rgb(243 244 246);
  }
  
  html.dark .text-gray-700,
  body.dark .text-gray-700 {
    color: rgb(229 231 235);
  }
  
  html.dark .text-gray-600,
  body.dark .text-gray-600 {
    color: rgb(209 213 219);
  }
  
  html.dark .text-gray-500,
  body.dark .text-gray-500 {
    color: rgb(156 163 175);
  }
  
  /* Dark mode borders */
  html.dark .border-gray-200,
  body.dark .border-gray-200 {
    border-color: rgb(51 65 85);
  }
  
  html.dark .border-gray-300,
  body.dark .border-gray-300 {
    border-color: rgb(71 85 105);
  }
  
  html.dark .border-gray-400,
  body.dark .border-gray-400 {
    border-color: rgb(100 116 139);
  }
  
  /* Dark mode form inputs */
  html.dark input,
  html.dark textarea,
  html.dark select,
  body.dark input,
  body.dark textarea,
  body.dark select {
    background-color: rgb(30 41 59);
    border-color: rgb(71 85 105);
    color: rgb(243 244 246);
  }
  
  html.dark input::placeholder,
  html.dark textarea::placeholder,
  body.dark input::placeholder,
  body.dark textarea::placeholder {
    color: rgb(156 163 175);
  }
  
  html.dark input:focus,
  html.dark textarea:focus,
  html.dark select:focus,
  body.dark input:focus,
  body.dark textarea:focus,
  body.dark select:focus {
    border-color: rgb(59 130 246);
    --tw-ring-color: rgb(59 130 246);
    --tw-ring-opacity: 0.5;
  }
  
  /* Dark mode hover states */
  html.dark .hover\:bg-gray-50:hover,
  body.dark .hover\:bg-gray-50:hover {
    background-color: rgb(51 65 85);
  }
  
  html.dark .hover\:bg-gray-100:hover,
  body.dark .hover\:bg-gray-100:hover {
    background-color: rgb(71 85 105);
  }
  
  html.dark .hover\:bg-gray-200:hover,
  body.dark .hover\:bg-gray-200:hover {
    background-color: rgb(100 116 139);
  }
  
  /* Dark mode gradient backgrounds */
  html.dark .bg-gradient-to-br.from-blue-50 {
    --tw-gradient-from: rgb(15 23 42);
  }
  
  html.dark .bg-gradient-to-br.to-teal-50 {
    --tw-gradient-to: rgb(30 41 59);
  }
  
  html.dark .bg-gray-50,
  body.dark .bg-gray-50 {
    background-color: rgb(30 41 59);
  }
  
  html.dark .bg-gray-100,
  body.dark .bg-gray-100 {
    background-color: rgb(51 65 85);
  }
  
  html.dark .bg-gray-200,
  body.dark .bg-gray-200 {
    background-color: rgb(71 85 105);
  }
  
  /* Dark mode shadows */
  html.dark .shadow-lg {
    box-shadow: 0 10px 15px -3px rgb(15 23 42 / 0.5), 0 4px 6px -4px rgb(15 23 42 / 0.5);
  }
  
  html.dark .shadow-xl {
    box-shadow: 0 20px 25px -5px rgb(15 23 42 / 0.6), 0 10px 10px -5px rgb(15 23 42 / 0.6);
  }
  
  /* Dark mode backdrop blur */
  html.dark .backdrop-blur-md {
    backdrop-filter: blur(12px);
    background-color: rgb(30 41 59 / 0.8);
  }
  
  /* Dark mode button states */
  html.dark .bg-blue-50 {
    @apply bg-blue-900/20;
  }
  
  html.dark .bg-teal-50 {
    @apply bg-teal-900/20;
  }
  
  html.dark .bg-purple-50 {
    @apply bg-purple-900/20;
  }
  
  html.dark .hover\:bg-blue-50:hover {
    @apply bg-blue-900/30;
  }
  
  html.dark .hover\:bg-teal-50:hover {
    @apply bg-teal-900/30;
  }
  
  html.dark .hover\:bg-purple-50:hover {
    @apply bg-purple-900/30;
  }
  
  /* Dark mode modal backgrounds */
  html.dark .bg-black.bg-opacity-50 {
    background-color: rgb(0 0 0);
    --tw-bg-opacity: 0.7;
  }
  
  /* Dark mode navigation specific styles */
  html.dark .navbar {
    background-color: rgb(30 41 59 / 0.95);
    backdrop-filter: blur(12px);
  }
  
  html.dark .navbar.scrolled {
    background-color: rgb(30 41 59 / 0.95);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }
  
  /* Dark mode accessibility improvements */
  html.dark .focus\:ring-blue-500:focus {
    --tw-ring-color: rgb(96 165 250);
    --tw-ring-opacity: 0.5;
  }
  
  html.dark .focus\:ring-offset-2:focus {
    --tw-ring-offset-color: rgb(30 41 59);
  }
}

/* Smooth transitions for theme changes */
* {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-duration: 300ms;
}

/* Enhanced theme toggle styling */
.theme-toggle {
  background: white !important;
  border: 2px solid #e5e7eb !important;
  color: #374151 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

html.dark .theme-toggle {
  background: #1e293b !important;
  border: 2px solid #475569 !important;
  color: #fbbf24 !important;
  box-shadow: 0 4px 12px rgba(251, 191, 36, 0.2) !important;
}

.theme-toggle:hover {
  transform: scale(1.1) !important;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25) !important;
}

html.dark .theme-toggle:hover {
  box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3) !important;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  html.dark .bg-dark-800 {
    background-color: rgb(0 0 0);
  }
  
  html.dark .text-gray-100 {
    color: rgb(255 255 255);
  }
  
  html.dark .border-dark-700 {
    border-color: rgb(255 255 255);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * {
    transition-property: none;
    transition-duration: 0s;
  }
  
  .theme-toggle:hover {
    transform: none !important;
  }
}

/* Focus visible improvements */
*:focus-visible {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
}

html.dark *:focus-visible {
  outline-color: #60A5FA;
}